# DocMaster AI — 서비스 기획 의도와 컨셉

## 1. 서비스 기획 의도

DocMaster AI는 **PDF·PPTX 문서를 업로드하면 텍스트와 표를 추출하고, 선택한 LLM(대규모 언어 모델)으로 경영진용 또는 실무용 보고서를 즉시 생성**하는 로컬 우선 문서 분석·리포트 생성 도구입니다.

### 핵심 목표

- **문서 추출의 자동화**: 복잡한 표·차트가 포함된 PDF/PPTX를 마크다운으로 변환하여, 사람이 직접 복사·정리하는 시간을 줄입니다.
- **보고서 품질의 일관성**: 경영진용(1-Pager, 결론·액션 중심)과 실무용(팀 협업·액션 플랜·담당·일정 중심) 두 유형의 프롬프트와 HTML 템플릿을 제공해, LLM이 일관된 형식으로 보고서를 작성하도록 유도합니다.
- **프라이버시·비용 통제**: 업로드 파일은 추출 후 즉시 삭제되며 서버에 저장하지 않습니다. 보고서 생성 시에만 추출된 텍스트가 사용자가 설정한 LLM API(OpenAI, Anthropic, Google 등)로 전송되므로, 원본 문서 유출 우려를 최소화합니다.

### 타깃 사용자

- 경영진·리더십에게 정리된 1페이지 보고서가 필요한 실무자
- 제안서·기획서·회의 자료를 빠르게 요약·재구성해야 하는 팀
- PDF/PPTX 추출 결과를 마크다운으로 받아 다른 도구(노션, 위키, 별도 LLM)에서 재활용하려는 사용자

---

## 2. 서비스 컨셉

### 2.1 로컬 파싱 + 클라우드 LLM 하이브리드

- **파싱(추출)**: 로컬 Python 백엔드(localhost:8001)에서 수행. PDF는 pymupdf4llm·pdfplumber, PPTX는 python-pptx로 텍스트·표·다이어그램을 마크다운으로 변환합니다.
- **보고서 생성**: 브라우저에서 사용자가 입력한 API 키로 선택한 LLM(OpenAI, Claude, Gemini 등)에 **추출된 마크다운만** 전송합니다. 원본 파일은 이미 삭제된 상태이므로 외부로 나가지 않습니다.

### 2.2 두 가지 보고 유형

| 유형 | 대상 | 특징 |
|------|------|------|
| **경영진용 (Executive)** | 경영진·리더십 | 1-Pager, 핵심 요약·결론·승인 요청·다음 액션. 자가 검증(2회차 Iteration)을 거친 논리 정교화. |
| **실무용 (Team)** | 팀 협업·실행 | 섹션·표·체크리스트·담당자·일정 중심. 구현·액션 플랜에 초점. |

### 2.3 다국어·설정

- UI 언어: 한글/영어 전환. 설정(API 키, 프롬프트)은 브라우저 Local Storage에 저장됩니다.
- 프롬프트: 경영진용·실무용 각각 편집 가능한 블록(역할, 규칙, Step)과, HTML 출력 형식용 고정 블록으로 구성됩니다.

---

## 3. 서비스 플로우

### 3.1 전체 흐름도

```
[사용자] → 설정(API 키, LLM 선택, 필요 시 프롬프트 확인)
    ↓
[Step 1] 파일 업로드 (PDF 또는 PPTX)
    ↓
[로컬 백엔드] POST /parse → 추출(마크다운) → 원본 파일 즉시 삭제 → 응답으로만 반환
    ↓
[프론트엔드] 추출 결과 표시, 보고서 형식·HTML 템플릿 선택
    ↓
[Step 2] [보고서 생성] 클릭
    ↓
[프론트엔드] 추출 마크다운 + 선택 LLM API → 보고서 생성 요청
    ↓
[LLM API] 경영진용/실무용 프롬프트 + 템플릿에 따라 HTML·마크다운 생성
    ↓
[프론트엔드] 생성된 HTML 보기 / 정리된 마크다운(.md) 다운로드
```

### 3.2 Step 1: 파일 업로드 및 추출

1. 사용자가 우측 상단 **설정**에서 API 키를 입력하고, 필요 시 경영진용/실무용 프롬프트를 확인합니다.
2. **PDF 또는 PPTX** 파일을 업로드 영역에 드래그 또는 선택합니다.
3. 프론트엔드가 `POST http://localhost:8001/parse`로 파일을 전송합니다.
4. 백엔드가 파일 형식에 따라 `pdf_to_markdown` 또는 `pptx_to_markdown`을 실행하고, 필요 시 `refine_extracted_markdown`(1차 정제), `apply_normalizations`(금액·날짜 정규화)를 적용합니다.
5. **추출이 끝난 뒤 원본 파일은 즉시 삭제**되며, 추출 결과는 서버에 저장하지 않고 **응답 본문으로만** 반환합니다.
6. 화면에 "Step 1 완료 — 문서 추출 결과"가 표시되고, 추출 마크다운 미리보기 및 "추출 결과 다운로드 (.md)" 버튼이 나타납니다.

### 3.3 Step 2: 보고서 형식 선택 및 생성

1. 사용자가 **보고서 형식**(경영진용 / 실무용)과 **HTML 형식**(기본, 기획/제안서 스타일, 프레젠테이션 슬라이드, 위키 스타일, 프리포맷 등)을 선택합니다.
2. **[보고서 생성]** 버튼을 누르면, 프론트엔드가 저장된 API 키와 선택한 LLM으로 `generateReportClient`를 호출합니다.
3. LLM에 전달되는 내용: 편집 가능 프롬프트 + HTML 고정 규칙 + 선택한 템플릿/스타일 가이드 + 추출된 마크다운(원시 데이터).
4. LLM이 **정리된 마크다운 블록**과 **완성 HTML 블록**을 순서대로 출력하면, 클라이언트가 파싱하여 HTML을 보고서 뷰어에 표시하고, 마크다운은 "정리 내용 (.md) 다운로드"로 제공합니다.
5. "만들어진 보고서 보기"로 팝업에서 HTML 보고서를 확인하고, 필요 시 HTML 또는 마크다운을 다운로드합니다.

### 3.4 데이터 및 보안 흐름

- **업로드 파일**: 로컬 백엔드의 임시 파일로만 존재 → 추출 완료 후 `os.unlink`로 삭제. 서버 디스크에 보관하지 않음.
- **추출 결과**: `/parse` 응답으로만 클라이언트에 전달. 백엔드는 저장하지 않음(기본 동작).
- **API 키**: 브라우저 Local Storage에만 저장. 보고서 생성 시에만 선택한 LLM API로 전송.
- **보고서 생성 시**: 추출된 텍스트(마크다운)만 LLM 제공업체로 전송. 원본 PDF/PPTX는 이미 없음.

---

## 4. 요약

| 항목 | 내용 |
|------|------|
| **의도** | PDF/PPTX → 추출 → LLM 기반 경영진/실무용 보고서 자동 생성, 로컬 추출·비저장으로 프라이버시 유지 |
| **컨셉** | 로컬 파싱 + 클라우드 LLM, 두 가지 보고 유형(경영진/실무), 다국어 UI·편집 가능 프롬프트 |
| **플로우** | 설정 → 업로드 → Step 1 추출(즉시 삭제) → 형식 선택 → Step 2 LLM 보고서 생성 → 보기/다운로드 |
